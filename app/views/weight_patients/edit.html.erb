<%# encoding: UTF-8 %>
<% content_for :hide_navbar, true %>
<div class="container-fluid p-0 bg-light min-vh-100">
  <div class="mx-auto bg-white shadow" style="max-width: 448px;">

    <div class="d-flex flex-column min-vh-100">

      <!-- Header -->
      <header class="p-4 position-relative bg-white border-bottom">
        <%= link_to weight_patient_path(@weight_patient), class: "position-absolute start-0 top-0 mt-4 ms-3 text-dark text-decoration-none" do %>
          <i class="bi bi-arrow-left fs-4"></i>
        <% end %>
        <h1 class="fs-5 fw-semibold text-dark text-center mb-0">Editar Peso</h1>
      </header>

      <!-- Main Content -->
      <main class="flex-grow-1 px-4 py-4">

        <%= form_with(model: @weight_patient, local: true, class: "d-flex flex-column h-100") do |f| %>

          <div class="flex-grow-1">
            <!-- Date Input -->
            <div class="mb-4">
              <%= f.label :date, "Fecha", class: "form-label fw-semibold text-dark" %>
              <%= f.date_field :date, class: "form-control form-control-lg border-secondary rounded-3", required: true %>
            </div>

            <!-- Weight Input -->
            <div class="mb-4">
              <%= f.label :weight, "Peso (kg)", class: "form-label fw-semibold text-dark" %>
              <div class="input-group input-group-lg">
                <%= f.number_field :weight,
                    step: 0.1,
                    class: "form-control border-secondary rounded-3",
                    placeholder: "Ej: 70.5",
                    required: true %>
                <span class="input-group-text bg-light border-secondary rounded-3">kg</span>
              </div>
              <small class="text-muted">Ingresa tu peso con un decimal (ej: 70.5)</small>
            </div>

            <!-- Error Messages -->
            <% if @weight_patient.errors.any? %>
              <div class="alert alert-danger rounded-3">
                <h6 class="alert-heading mb-2">
                  <%= pluralize(@weight_patient.errors.count, "error") %> impidi√≥ guardar:
                </h6>
                <ul class="mb-0 small">
                  <% @weight_patient.errors.full_messages.each do |message| %>
                    <li><%= message %></li>
                  <% end %>
                </ul>
              </div>
            <% end %>
          </div>

          <!-- Submit Button -->
          <div class="mt-auto">
            <%= f.submit "Actualizar Peso", class: "btn btn-dark w-100 py-3 rounded-3 fw-semibold shadow-sm" %>
          </div>

        <% end %>

      </main>

    </div>

  </div>
</div>
