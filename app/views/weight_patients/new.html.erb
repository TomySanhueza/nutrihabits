<%# encoding: UTF-8 %>
<% content_for :hide_navbar, true %>
<div class="container-fluid p-0 bg-light min-vh-100">
  <div class="mx-auto bg-white shadow" style="max-width: 448px;">

    <%= simple_form_for @weight_patient, html: { class: "d-flex flex-column min-vh-100" } do |f| %>

      <!-- Header -->
      <header class="p-4 position-relative bg-white">
        <%= link_to pats_dashboard_path, class: "position-absolute start-0 top-0 mt-3 ms-3 text-dark text-decoration-none" do %>
          <i class="bi bi-arrow-left fs-4"></i>
        <% end %>
        <h1 class="fs-5 fw-bold text-dark text-center mb-0">Registrar Peso</h1>
      </header>

      <!-- Main Content -->
      <main class="flex-grow-1 d-flex flex-column px-4 py-4">

        <!-- Weight Input Section -->
        <div class="flex-grow-1 d-flex flex-column align-items-center justify-content-center">

          <!-- Large Weight Display -->
          <div class="w-100 text-center mb-5">
            <%= f.input :weight,
                        label: false,
                        placeholder: "00.0",
                        input_html: {
                          class: "form-control border-0 text-center fw-bold p-0 bg-transparent",
                          style: "font-size: 5rem; color: #1f2937;",
                          inputmode: "decimal",
                          maxlength: 5,
                          step: 0.1
                        } %>
            <span class="fs-2 fw-medium text-secondary">kg</span>
          </div>

          <!-- Date Input -->
          <div class="w-100 mb-4" style="max-width: 400px;">
            <div class="bg-light rounded-3 p-3 d-flex justify-content-between align-items-center">
              <div class="d-flex align-items-center gap-2">
                <i class="bi bi-calendar3 text-secondary"></i>
                <span class="small fw-medium text-secondary">Fecha</span>
              </div>
              <div class="d-flex align-items-center gap-2">
                <%= f.input :date,
                            as: :string,
                            label: false,
                            input_html: {
                              type: 'date',
                              id: 'weight_patient_date',
                              class: "border-0 bg-transparent text-end fw-semibold text-dark",
                              style: "width: auto; cursor: pointer; font-size: 0.95rem;",
                              value: Date.today.strftime("%Y-%m-%d")
                            },
                            wrapper_html: { class: "mb-0 d-inline-block" } %>
                <i class="bi bi-check-circle-fill text-success" style="font-size: 1.1rem;"></i>
              </div>
            </div>
          </div>

          <!-- Motivational Text -->
          <p class="text-center small text-secondary mb-0">
            Cada registro te acerca a tu meta ðŸ’ª
          </p>

        </div>

        <!-- Submit Button -->
        <div class="mt-4">
          <%= f.button :submit, "Guardar Peso", class: "btn btn-dark w-100 py-3 rounded-3 fw-semibold shadow-lg" %>
        </div>

      </main>

    <% end %>

  </div>
</div>

<style>
  /* Custom large input styling */
  input[placeholder="00.0"]:focus {
    outline: none;
    color: #1f2937 !important;
  }
  input[placeholder="00.0"]::placeholder {
    color: #d1d5db;
  }

  /* Custom date input styling */
  input[type="date"] {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    position: relative;
  }

  /* Ocultar completamente el Ã­cono de calendario nativo */
  input[type="date"]::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
  }

  input[type="date"]::-webkit-inner-spin-button,
  input[type="date"]::-webkit-clear-button {
    display: none;
    -webkit-appearance: none;
  }

  /* Hacer que todo el contenedor sea clickeable */
  input[type="date"] {
    cursor: pointer;
  }

  input[type="date"]:focus {
    outline: none;
  }

  /* Hide the label wrapper from Simple Form */
  .string.optional {
    margin-bottom: 0 !important;
  }

  /* Remove default Simple Form wrapper styles */
  #weight_patient_date {
    padding: 0 !important;
    margin: 0 !important;
  }
</style>
